{"ast":null,"code":"import _objectSpread from\"C:/Users/epfer/Clemson/CPSC3720/Project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// File defines the main React component for the Tiger Tix frontend application. Retrieves event data from the backend\n// API and provides functionality to retrieve event data, purchase tickets, etc.\nimport React,{useEffect,useState}from'react';import'./App.css';import VoiceTest from\"./Voice\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function LoginForm(_ref){let{setLoggedIn,setUser}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const login=async e=>{e.preventDefault();setError('');try{const res=await fetch('http://localhost:8001/api/authentication/login',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({email,password})});const data=await res.json();if(res.ok){setLoggedIn(true);setUser({email});}else{setError(data.message||\"TigerTix login was unsuccessful\");}}catch(err){console.error(err);setError(\"TigerTix login was unsuccessful\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome Back! Log In to TigerTix:\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:email,onChange:e=>setEmail(e.target.value),type:\"text\",style:{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,onChange:e=>setPassword(e.target.value),type:\"password\",style:{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{style:{\"padding\":\"10px\",\"fontWeight\":\"bolder\"},type:\"submit\",children:\"Login!\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{\"color\":\"red\"},children:error})]});}function RegistrationForm(_ref2){let{setLoggedIn}=_ref2;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const register=async e=>{e.preventDefault();setError('');setSuccess('');try{const res=await fetch('http://localhost:8001/api/authentication/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(res.ok){setSuccess('You have successfully registered for TigerTix! You may now log in.');setEmail('');setPassword('');}else{setError(data.message||\"Registration for TigerTix was unsuccessful.\");}}catch(err){console.error(err);setError(\"Registration for TigerTix was unsuccessful.\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:register,style:{\"fontWeight\":\"normal\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign up for TigerTix Below:\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:email,onChange:e=>setEmail(e.target.value),type:\"text\",style:{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,onChange:e=>setPassword(e.target.value),type:\"password\",style:{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{\"padding\":\"10px\",\"fontWeight\":\"bolder\"},children:\"Register!\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{\"color\":\"red\"},children:error}),success&&/*#__PURE__*/_jsx(\"p\",{style:{\"color\":\"green\"},children:success})]});}// Serves as root componenet of web app. Fetches the event data, displays events, handles user interactions.\n// Returns: the webpage displaying all available events and buttons\n// Side effects: indicates network request on component mount to get event data and update state when \n// necessary.\nfunction App(){const[events,setEvents]=useState([]);const[query,setQuery]=useState('');const[message,setMessage]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[loggedIn,setLoggedIn]=useState(false);const[user,setUser]=useState(null);// Gets event data from API when it first mounts. Ensures list is populated when page loads.\n// Sends request to backend and updates local state\nuseEffect(()=>{if(!loggedIn)return;fetch('http://localhost:6001/api/events').then(res=>res.json()).then(data=>setEvents(data)).catch(err=>console.error(err));},[loggedIn]);const logout=async()=>{try{await fetch(\"http://localhost:8001/api/authentication/logout\",{method:\"POST\",credentials:\"include\"});setLoggedIn(false);setUser(null);}catch(err){console.error(\"Failed to logout of TigerTix.\",err);}};//Speech helper function for accessiblity\nconst speakText=function(text){var _opts$rate,_opts$pitch;let opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!window.speechSynthesis)return;try{window.speechSynthesis.cancel();}catch(_unused){}const utterance=new SpeechSynthesisUtterance(String(text));utterance.rate=(_opts$rate=opts.rate)!==null&&_opts$rate!==void 0?_opts$rate:1;utterance.pitch=(_opts$pitch=opts.pitch)!==null&&_opts$pitch!==void 0?_opts$pitch:1;const pickVoice=voices=>voices.find(v=>v.lang&&v.lang.startsWith('en'))||voices[0];const voices=window.speechSynthesis.getVoices();if(voices&&voices.length>0){utterance.voice=pickVoice(voices);window.speechSynthesis.speak(utterance);return;}// window.speechSynthesis.spe\n// ak(utterance);\nconst onVoicesChanged=()=>{const v=window.speechSynthesis.getVoices();utterance.voice=pickVoice(v);window.speechSynthesis.speak(utterance);window.speechSynthesis.onvoiceschanged=null;};window.speechSynthesis.onvoicechanges=onVoicesChanged;};useEffect(()=>{if(!loggedIn)return;if(events&&events.length>0){const summary=\"Found \".concat(events.length,\" event\").concat(events.length>1?'s':'',\". \")+events.map(ev=>\"\".concat(ev.eventName,\", on \").concat(ev.eventDate,\", with \").concat(ev.numTickets,\" tickets remaining. \")).join(' ');speakText(summary);}else if(message){speakText(message);}},[events,message,loggedIn]);async function handleRequest(e){e.preventDefault();setLoading(true);setMessage('');setError('');setEvents([]);try{const response=await fetch('http://localhost:7001/api/llm/parse',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:query})});const headers=(response.headers.get('content-type')||'').toLowerCase();if(headers.includes('application/json')){const data=await response.json();if(Array.isArray(data)){setEvents(data);}else if(data!==null&&data!==void 0&&data.events&&Array.isArray(data.events)){// setEvents(data.events);\nsetEvents(data.events.map(ev=>{var _data$tickets,_data$intent;return _objectSpread(_objectSpread({},ev),{},{aiTickets:(_data$tickets=data.tickets)!==null&&_data$tickets!==void 0?_data$tickets:0,aiIntent:(_data$intent=data.intent)!==null&&_data$intent!==void 0?_data$intent:null});}));}else{setMessage(\"Your input was unable to be parsed. Please enter your desired event in a similar format to the provided example: I want to book two tickets to the upcoming jazz concert.\");}}else{const text=await response.text();setMessage(text);}}catch(err){setError(\"Request failed\");console.error(err);}finally{setLoading(false);}}//Handles process of purchasing tocker for a given event. Sends request to API to decrement available\n// ticket count, etc.\n// Params: eventName - name of event that a ticket is being purchased for\n// Params: id - unique ID of event being purchased\n// Returns: Promise<void> - operations to update database\nconst buyTicket=async function(eventName,id){let qty=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;// Send request\ntry{const res=await fetch(\"http://localhost:6001/api/events/\".concat(id,\"/purchase\"),{method:'POST',credentials:'include',headers:{'Content-Type':'application/json'},body:JSON.stringify({tickets:qty})});if(res.status===401){setLoggedIn(false);setUser(null);alert(\"Your TigerTix session has expired. Please login again.\");window.location.reload();return;}const headersVar=(res.headers.get('content-type')||'').toLowerCase();let data;if(headersVar.includes('application/json')){data=await res.json();}else{const text=await res.text();console.error(\"Purchase endpoint returned non-json\");alert(\"Purchase failed: \"+text);return;}// Handles errors\nif(!res.ok){alert(\"Error: \".concat(data.error));return;}//Update ticker count for purchase\nsetEvents(prevEvents=>prevEvents.map(event=>event.id===id?_objectSpread(_objectSpread({},event),{},{numTickets:data.ticketsRemaining}):event));//Notify user\nalert(\"Ticket purchased for: \".concat(eventName,\". Remaining tickets: \").concat(data.ticketsRemaining));}catch(error){console.error(error);alert(\"Failed to purchase ticket.\");}};//Displays page title, list of events with all the event information plus operations\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[loggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{\"float\":\"right\",\"fontSize\":\"25px\",\"paddingRight\":\"70px\",\"whiteSpace\":\"pre\"},children:loggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Logged in as: \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{logout();window.location.reload();},style:{\"marginLeft\":\"20px\"},children:\"Log Out\"})]}):null}),/*#__PURE__*/_jsx(\"img\",{src:\"/tiger_paw.gif\",alt:\"Clemson Logo\",style:{\"float\":\"left\",\"paddingLeft\":\"70px\",\"height\":\"10rem\",\"width\":\"auto\"}}),/*#__PURE__*/_jsx(\"h1\",{role:\"banner\",style:{\"textAlign\":\"center\",\"whiteSpace\":\"pre\"},children:\"                      Welcome to Tiger Tix!\"}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRequest,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type or use voice-to-text to let us know what kind of event and how many tickets you're looking for!\",value:query,onChange:e=>setQuery(e.target.value),style:{width:'55%',fontSize:'35px',float:\"left\",marginLeft:\"28rem\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{\"fontSize\":\"35px\",\"marginRight\":\"36rem\"},children:\"Ask!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(VoiceTest,{onTranscribe:text=>{setQuery(text);}}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'black'},children:error}),events.length>0?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{\"textDecoration\":\"underline\"},children:\"Available Events\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const summary=\"Reading \".concat(events.length,\" events. \").concat(events.map(ev=>\"\".concat(ev.eventName,\" on \").concat(ev.eventDate,\". This event has \").concat(ev.numTickets,\" tickets remaining.\")).join('. '));console.log(summary);speakText(summary);},children:\"Read events\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{try{window.speechSynthesis.cancel();}catch(_unused2){}},children:\"Stop\"})]}):message&&/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ticket Booking Assistant\"}),/*#__PURE__*/_jsx(\"pre\",{style:{whiteSpace:'pre-wrap',fontSize:'1.7rem'},children:message})]})]}),/*#__PURE__*/_jsx(\"ul\",{children:events.map(event=>/*#__PURE__*/_jsxs(\"li\",{role:\"list\",children:[event.eventName,\" - \",event.eventDate,' ',/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _event$aiTickets;return buyTicket(event.eventName,event.id,(_event$aiTickets=event.aiTickets)!==null&&_event$aiTickets!==void 0?_event$aiTickets:1);},children:\"Confirm Event Booking\"}),\" - Tickets Left: \",event.numTickets]},event.id))})]}):/*#__PURE__*/_jsxs(\"div\",{style:{\"fontSize\":\"40px\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(LoginForm,{setLoggedIn:setLoggedIn,setUser:setUser}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Not registered?\",/*#__PURE__*/_jsx(RegistrationForm,{setLoggedIn:setLoggedIn})]})]}),\";\"]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","VoiceTest","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","_ref","setLoggedIn","setUser","email","setEmail","password","setPassword","error","setError","login","e","preventDefault","res","fetch","method","headers","credentials","body","JSON","stringify","data","json","ok","message","err","console","onSubmit","children","name","value","onChange","target","type","style","RegistrationForm","_ref2","success","setSuccess","register","App","events","setEvents","query","setQuery","setMessage","loading","setLoading","loggedIn","user","then","catch","logout","speakText","text","_opts$rate","_opts$pitch","opts","arguments","length","undefined","window","speechSynthesis","cancel","_unused","utterance","SpeechSynthesisUtterance","String","rate","pitch","pickVoice","voices","find","v","lang","startsWith","getVoices","voice","speak","onVoicesChanged","onvoiceschanged","onvoicechanges","summary","concat","map","ev","eventName","eventDate","numTickets","join","handleRequest","response","prompt","get","toLowerCase","includes","Array","isArray","_data$tickets","_data$intent","_objectSpread","aiTickets","tickets","aiIntent","intent","buyTicket","id","qty","status","alert","location","reload","headersVar","prevEvents","event","ticketsRemaining","className","onClick","src","alt","role","placeholder","width","fontSize","float","marginLeft","disabled","onTranscribe","color","log","_unused2","whiteSpace","_event$aiTickets"],"sources":["C:/Users/epfer/Clemson/CPSC3720/Project/frontend/src/App.js"],"sourcesContent":["// File defines the main React component for the Tiger Tix frontend application. Retrieves event data from the backend\r\n// API and provides functionality to retrieve event data, purchase tickets, etc.\r\nimport React, { useEffect, useState } from 'react';\r\nimport './App.css';\r\nimport VoiceTest from \"./Voice\";\r\n\r\nfunction LoginForm( {setLoggedIn, setUser }) {\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const login = async(e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      const res = await fetch('http://localhost:8001/api/authentication/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include', \r\n        body: JSON.stringify({email, password})\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setLoggedIn(true);\r\n        setUser({email});\r\n      }\r\n      else {\r\n        setError(data.message || \"TigerTix login was unsuccessful\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"TigerTix login was unsuccessful\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit = {login}>\r\n      <h2>Welcome Back! Log In to TigerTix:</h2>\r\n        <label>Email:   \r\n          <input name = \"email\" value = {email} onChange = {e => setEmail(e.target.value)} type = \"text\" style = {{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}}></input>\r\n        </label>\r\n        <br />\r\n        <label>Password:    \r\n          <input name = \"password\" value = {password} onChange = {e => setPassword(e.target.value)} type = \"password\" style = {{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}}></input>\r\n        </label>\r\n        <br />\r\n        <br />\r\n        <button style={{\"padding\":\"10px\", \"fontWeight\":\"bolder\"}} type = \"submit\">Login!</button>\r\n        {error && <p style = {{\"color\":\"red\"}}>{error}</p>}\r\n\r\n    </form>\r\n  );\r\n\r\n}\r\n\r\nfunction RegistrationForm( { setLoggedIn }) {\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const register = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:8001/api/authentication/register', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({email, password})\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setSuccess('You have successfully registered for TigerTix! You may now log in.');\r\n        setEmail('');\r\n        setPassword('');\r\n      }\r\n      else {\r\n        setError(data.message || \"Registration for TigerTix was unsuccessful.\");\r\n\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Registration for TigerTix was unsuccessful.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit = {register} style={{\"fontWeight\":\"normal\"}}>\r\n      <h2>Sign up for TigerTix Below:</h2>\r\n        <label>Email:   \r\n          <input name = \"email\" value = {email} onChange = {e => setEmail(e.target.value)} type = \"text\" style = {{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}}></input>\r\n        </label>\r\n        <br />\r\n        <label>Password:   \r\n          <input name = \"password\" value = {password} onChange = {e => setPassword(e.target.value)} type = \"password\" style = {{\"fontSize\":\"40px\",\"marginLeft\":\"20px\"}}></input>\r\n        </label>\r\n        <br />\r\n        <br />\r\n        <button type = \"submit\" style={{\"padding\":\"10px\", \"fontWeight\":\"bolder\"}}>Register!</button>\r\n        {error && <p style = {{\"color\": \"red\"}}>{error}</p>}\r\n        {success && <p style = {{\"color\":\"green\"}}>{success}</p>}\r\n\r\n\r\n    </form>\r\n\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n// Serves as root componenet of web app. Fetches the event data, displays events, handles user interactions.\r\n// Returns: the webpage displaying all available events and buttons\r\n// Side effects: indicates network request on component mount to get event data and update state when \r\n// necessary.\r\nfunction App() {\r\n  const [events, setEvents] = useState([]);\r\n  const [query, setQuery] = useState('');\r\n  const[message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Gets event data from API when it first mounts. Ensures list is populated when page loads.\r\n  // Sends request to backend and updates local state\r\n  useEffect(() => {\r\n    if (!loggedIn) return;\r\n    fetch('http://localhost:6001/api/events')\r\n    .then((res) => res.json())\r\n    .then((data) => setEvents(data))\r\n    .catch((err) => console.error(err));\r\n  }, [loggedIn])\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await fetch (\"http://localhost:8001/api/authentication/logout\", {\r\n        method: \"POST\", \r\n        credentials: \"include\",\r\n      });\r\n\r\n      setLoggedIn(false);\r\n      setUser(null);\r\n\r\n    } catch (err) {\r\n      console.error(\"Failed to logout of TigerTix.\", err);\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  //Speech helper function for accessiblity\r\n  const speakText = (text, opts = {}) => {\r\n    if (!window.speechSynthesis) return;\r\n        try {\r\n          window.speechSynthesis.cancel();\r\n        }\r\n        catch {}\r\n        const utterance = new SpeechSynthesisUtterance(String(text));\r\n        utterance.rate = opts.rate ?? 1;\r\n        utterance.pitch = opts.pitch ?? 1;\r\n        const pickVoice = (voices) => voices.find(v => v.lang && v.lang.startsWith('en')) || voices[0];\r\n        const voices = window.speechSynthesis.getVoices()\r\n        if (voices && voices.length > 0) {\r\n          utterance.voice = pickVoice(voices);\r\n          window.speechSynthesis.speak(utterance);\r\n          return;\r\n        }\r\n        // window.speechSynthesis.spe\r\n        // ak(utterance);\r\n\r\n        const onVoicesChanged = () => {\r\n          const v = window.speechSynthesis.getVoices();\r\n          utterance.voice = pickVoice(v);\r\n          window.speechSynthesis.speak(utterance);\r\n          window.speechSynthesis.onvoiceschanged = null;\r\n        }\r\n        window.speechSynthesis.onvoicechanges = onVoicesChanged;\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    if (!loggedIn) return;\r\n\r\n    if (events && events.length > 0) {\r\n      const summary = `Found ${events.length} event${events.length > 1 ? 's' : ''}. ` +\r\n        events.map(ev => `${ev.eventName}, on ${ev.eventDate}, with ${ev.numTickets} tickets remaining. `).join(' ');\r\n      speakText(summary);\r\n      } else if (message) {\r\n        speakText(message);\r\n      }\r\n  }, [events, message, loggedIn]);\r\n  \r\n\r\n  async function handleRequest(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    setError('');\r\n    setEvents([]);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:7001/api/llm/parse', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({prompt: query})\r\n      });\r\n    \r\n    const headers = (response.headers.get('content-type') || '').toLowerCase();\r\n\r\n    if (headers.includes('application/json')) {\r\n      const data = await response.json();\r\n      if (Array.isArray(data)) {\r\n        setEvents(data);\r\n      }\r\n    \r\n      else if (data?.events && Array.isArray(data.events)) {\r\n        // setEvents(data.events);\r\n        setEvents(data.events.map(ev => ({\r\n          ...ev,\r\n          aiTickets: data.tickets ?? 0,\r\n          aiIntent: data.intent ?? null\r\n        })))\r\n      }\r\n      else {\r\n\r\n        setMessage(\"Your input was unable to be parsed. Please enter your desired event in a similar format to the provided example: I want to book two tickets to the upcoming jazz concert.\");\r\n      }\r\n      } else {\r\n        const text = await response.text();\r\n        setMessage(text);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Request failed\");\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    }\r\n  \r\n\r\n\r\n  //Handles process of purchasing tocker for a given event. Sends request to API to decrement available\r\n  // ticket count, etc.\r\n  // Params: eventName - name of event that a ticket is being purchased for\r\n  // Params: id - unique ID of event being purchased\r\n  // Returns: Promise<void> - operations to update database\r\n  const buyTicket = async (eventName, id, qty = 1) => {\r\n\r\n    // Send request\r\n    try {\r\n      const res = await fetch(`http://localhost:6001/api/events/${id}/purchase`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify( {tickets: qty })\r\n\r\n      });\r\n\r\n      if (res.status === 401) {\r\n        setLoggedIn(false);\r\n        setUser(null);\r\n        alert(\"Your TigerTix session has expired. Please login again.\");\r\n        window.location.reload();\r\n        return;\r\n      }\r\n\r\n      const headersVar = (res.headers.get('content-type') || '').toLowerCase();\r\n      let data;\r\n      if (headersVar.includes('application/json')) {\r\n        data = await res.json();\r\n      } \r\n      else {\r\n        const text = await res.text();\r\n        console.error(\"Purchase endpoint returned non-json\");\r\n        alert(\"Purchase failed: \" + text);\r\n        return;\r\n      }\r\n\r\n\r\n      // Handles errors\r\n      if (!res.ok) {\r\n        alert(`Error: ${data.error}`);\r\n        return;\r\n      }\r\n\r\n      //Update ticker count for purchase\r\n      setEvents(prevEvents =>\r\n        prevEvents.map(event =>\r\n          event.id === id ? { ...event, numTickets: data.ticketsRemaining} : event\r\n        )\r\n      );\r\n\r\n      //Notify user\r\n      alert(`Ticket purchased for: ${eventName}. Remaining tickets: ${data.ticketsRemaining}`);\r\n\r\n\r\n\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"Failed to purchase ticket.\");\r\n    }\r\n  };\r\n\r\n\r\n\r\n \r\n\r\n  //Displays page title, list of events with all the event information plus operations\r\n  return (\r\n    <div className=\"App\">\r\n      {loggedIn ? (\r\n        \r\n        <>\r\n\r\n      <div style = {{\"float\":\"right\", \"fontSize\":\"25px\", \"paddingRight\":\"70px\", \"whiteSpace\":\"pre\"}}>\r\n        {loggedIn ? (\r\n          <>\r\n          <br />\r\n          <span>Logged in as: {user?.email}</span>\r\n          <button onClick = {() => {logout(); window.location.reload();}} style = {{\"marginLeft\":\"20px\"}}>Log Out</button>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n      <img src = \"/tiger_paw.gif\" alt = \"Clemson Logo\" style = {{\"float\":\"left\", \"paddingLeft\":\"70px\",\"height\":\"10rem\", \"width\":\"auto\"}}></img>\r\n       <h1 role=\"banner\" style = {{\"textAlign\":\"center\", \"whiteSpace\":\"pre\"}}>                      Welcome to Tiger Tix!</h1>\r\n      \r\n         \r\n\r\n      <main> \r\n        <form onSubmit = {handleRequest}>\r\n          <input \r\n            type = \"text\"\r\n            placeholder = \"Type or use voice-to-text to let us know what kind of event and how many tickets you're looking for!\"\r\n            value = {query}\r\n            onChange = {(e) => setQuery(e.target.value)}\r\n            style = {{ width: '55%', fontSize: '35px', float: \"left\", marginLeft: \"28rem\"}}\r\n            />         \r\n          <button type = \"submit\" disabled = {loading} style = {{\"fontSize\":\"35px\", \"marginRight\":\"36rem\"}}>Ask!</button>\r\n          <br />\r\n          <br />\r\n        </form>\r\n\r\n\r\n        <VoiceTest onTranscribe = {(text) => {\r\n          setQuery(text);\r\n        }} />\r\n\r\n        {loading && <p>Loading...</p>}\r\n        {error && <p style = {{ color : 'black' }}>{error}</p>}\r\n\r\n        {events.length > 0 ? (\r\n          <section> \r\n            <h2 style = {{\"textDecoration\":\"underline\"}}>Available Events</h2>\r\n          \r\n            <button onClick={() => {\r\n              const summary = `Reading ${events.length} events. ${events.map(ev => `${ev.eventName} on ${ev.eventDate}. This event has ${ev.numTickets} tickets remaining.`).join('. ')}`;\r\n              console.log(summary);\r\n              speakText(summary);\r\n            }}>Read events</button>\r\n            <button onClick={() => { try { window.speechSynthesis.cancel(); } catch {} }}>Stop</button>\r\n          \r\n          </section>\r\n        ) : (\r\n          message && (\r\n            <section> \r\n                <h2>Ticket Booking Assistant</h2>\r\n                <pre style = {{ whiteSpace: 'pre-wrap', fontSize: '1.7rem'}}>{message}</pre>\r\n            </section>\r\n          )\r\n        )}\r\n      </main>\r\n\r\n      {/* This is the part that we had beforehand */}\r\n        <ul>\r\n        {events.map((event) => (\r\n          <li role=\"list\" key={event.id}>\r\n            {event.eventName} - {event.eventDate}{' '}\r\n              <button onClick={() => buyTicket(event.eventName, event.id, event.aiTickets ?? 1)}>Confirm Event Booking</button> - Tickets Left: {event.numTickets} \r\n          </li> \r\n        ))}\r\n        </ul>\r\n   \r\n\r\n\r\n         </>\r\n      ) : (\r\n        <div style = {{\"fontSize\":\"40px\"}}>\r\n          <br />\r\n          <LoginForm setLoggedIn = {setLoggedIn} setUser = {setUser}/>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <hr></hr>\r\n          <h3>Not registered?\r\n            <RegistrationForm setLoggedIn = {setLoggedIn} />\r\n          </h3>\r\n        </div>\r\n      )};\r\n\r\n\r\n    </div>\r\n        \r\n   \r\n  \r\n\r\n    )}\r\n\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}